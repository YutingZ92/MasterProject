<!DOCTYPE HTML>
<html>
<head>
<script>
window.onload = function () {

var dataPoints1 = [];
var dataPoints2 = [];
var dataPoints3 = [];
var dataPoints4 = [];
var dps = [];




var options = {
	title: {
		text: "CPU"
	},
	axisX: {
		title: "chart updates every 0.2 secs"
	},
	axisY: {
		suffix: "%",
		includeZero: false
	},
	toolTip: {
		shared: true
	},
	legend: {
		cursor: "pointer",
		verticalAlign: "top",
		fontSize: 22,
		fontColor: "dimGrey",
		itemclick: toggleDataSeries
	},
	data: [{
		type: "spline",
		xValueType: "dateTime",
		yValueFormatString: "##.00%",
		xValueFormatString: "hh:mm:ss TT",
		showInLegend: true,
		name: "Node 1",
		dataPoints: dataPoints1
	},
	{
		type: "spline",
		xValueType: "dateTime",
		yValueFormatString: "##.00%",
		showInLegend: true,
		name: "Node 2",
		dataPoints: dataPoints2
	}, {
		type: "spline",
		xValueType: "dateTime",
		yValueFormatString: "##.00%",
		showInLegend: true,
		name: "Node 3",
		dataPoints: dataPoints3
	},{
		type: "spline",
		xValueType: "dateTime",
		yValueFormatString: "##.00%",
		showInLegend: true,
		name: "Node 4",
		dataPoints: dataPoints4
	}]
};

//var chart = $("#chartContainer").CanvasJSChart(options);

function toggleDataSeries(e) {
	if (typeof (e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
		e.dataSeries.visible = false;
	}
	else {
		e.dataSeries.visible = true;
	}
	e.chart.render();
}

var updateInterval = 2000;
// initial value
var yValue1 = 0;
var yValue2 = 0;
var yValue3 = 0;
var yValue4 = 0;
var dataLength = 50; // number of dataPoints visible at any point 
var time = new Date();

$.getJSON("https://canvasjs.com/services/data/datapoints.php?xstart=1&ystart=10&length=10&type=json", function(data) {  
    $.each(data, function(key, value){
        dataPoints1.push({x: value[0], y: parseInt(value[1])});
    });
    var chart = $("#chartContainer").CanvasJSChart(options);
    
    chart.render();
    updateChart();
});

$.getJSON("https://canvasjs.com/services/data/datapoints.php?xstart=1&ystart=10&length=10&type=json", function(data) {  
    $.each(data, function(key, value){
        dataPoints2.push({x: value[0], y: parseInt(value[1])});
    });
    var chart = $("#chartContainer").CanvasJSChart(options);
    
    chart.render();
    updateChart();
});

$.getJSON("https://canvasjs.com/services/data/datapoints.php?xstart=1&ystart=10&length=10&type=json", function(data) {  
    $.each(data, function(key, value){
        dataPoints3.push({x: value[0], y: parseInt(value[1])});
    });
    var chart = $("#chartContainer").CanvasJSChart(options);
    
    chart.render();
    updateChart();
});

$.getJSON("https://canvasjs.com/services/data/datapoints.php?xstart=1&ystart=10&length=10&type=json", function(data) {  
    $.each(data, function(key, value){
        dataPoints4.push({x: value[0], y: parseInt(value[1])});
    });
    var chart = $("#chartContainer").CanvasJSChart(options);
    
    chart.render();
    updateChart();
});




</script>
</head>
<body>
<div id="chartContainer" style="height: 300px; width: 100%;"></div>
<script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
</body>
</html>
